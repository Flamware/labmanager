<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <th:block th:fragment="formLibs">
    	<th:block th:replace="fragments/libs :: jquery-validation"></th:block>
    	<th:block th:replace="fragments/libs :: sweetalert" th:if="${changeEnabled}"></th:block>
    	<th:block th:replace="fragments/buttons :: ajaxButtons" th:if="${changeEnabled}"></th:block>
    	<th:block th:replace="fragments/buttons :: waitButtons" th:if="${changeEnabled}"></th:block>
		<script th:src="@{/js/labmanager/form.js}"></script>
	</th:block>

	<form th:fragment="genericForm(submitEnabled, groups)" id="form">
		<input th:replace="${groups}"></input>
		<button id="submitButton" type="button"
		        class="btn btn-primary mt-4 pr-4 pl-4" th:if="${changeEnabled}"
		        th:utext="#{html.Submit}" th:disabled="${!submitEnabled}"></button>
	</form>

	<form th:fragment="entityForm(formLabel, hiddenName, hiddenId, url, successUrl, failureMsg, groups)" id="form">
		<input th:replace="${groups}"></input>
		<button id="submitButton" type="button"
		        class="btn btn-primary mt-4 pr-4 pl-4" th:if="${changeEnabled}"
		        th:utext="#{html.Submit}"></button>
		<button th:unless="${#strings.isEmpty(successUrl)}"]
		        id="cancelButton" type="button"
		        class="btn btn-secondary mt-4 pr-4 pl-4"
		        th:utext="#{html.Cancel}"></button>
		<script th:src="@{/js/labmanager/form_entityform.js}"></script>
		<script th:inline="javascript">
		addWaitButtonCallback($('#submitButton'), "[(#{html.Submit})]",
				"[(${formLabel})]", "[(${url})]", "[(${failureMsg})]",
				null,
				(formData, param) => {
			        /*[# th:unless="${#strings.isEmpty(hiddenName) || #strings.isEmpty(hiddenId)}"]*/
					formData.append("[(${hiddenName})]", "[(${hiddenId})]");
			        /*[/]*/
					fillDataFormInEntityForm(formData);
				},
				() => {
			        /*[# th:if="${#strings.isEmpty(successUrl)}"]*/
					location.reload();
			        /*[/]*/
			        /*[# th:unless="${#strings.isEmpty(successUrl)}"]*/
					location.href = "[(${successUrl})]";
			        /*[/]*/
				});
        /*[# th:unless="${#strings.isEmpty(successUrl)}"]*/
        $('#cancelButton').on('click', (e) => {
			location.href = "[(${successUrl})]";
        });
        /*[/]*/
		</script>
    </form>
	
    <th:block th:fragment="dynamicInputFunctions">
		<script th:src="@{/js/labmanager/form_dynamicinputfunctions.js}"></script>
	</th:block>

	<div th:fragment="textInput(name, label, placeholder, value)" class="form-group">
		<label th:for="${'textInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<input class="form-control" type="text" th:id="${'textInput_' + name}" th:name="${name}"
		       th:value="${value}" th:placeholder="${placeholder}"></input>
    </div>
    
	<div th:fragment="textInputWithDiv(name, label, placeholder, value, divId)" class="form-group">
		<label th:for="${'textInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<input class="form-control" type="text" th:id="${'textInput_' + name}" th:name="${name}"
		       th:value="${value}" th:placeholder="${placeholder}"></input>
		<div th:id="${divId}" class="form-info-area"></div>
    </div>

	<div th:fragment="textInputDynamic(name, label, placeholder, value)" class="form-group dynamic-form-group" th:id="${'dynamic-form-group-' + name}">
		<label th:for="${'textInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<input class="form-control" type="text" th:id="${'textInput_' + name}" th:name="${name}"
		       th:value="${value}" th:placeholder="${placeholder}"></input>
    </div>

	<div th:fragment="comboInput(name, label, options)" class="form-group">
		<label th:for="${'comboInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<select th:class="${'form-control form-control-combo select-' + name + ' list-group-item list-group-item-action'}"
		        th:id="${'comboInput_' + name}" th:name="${name}">
			<option th:replace="${options}"></option>
		</select>
    </div>
    
	<div th:fragment="comboInputDynamic(name, label, options)" class="form-group dynamic-form-group" th:id="${'dynamic-form-group-' + name}">
		<label th:for="${'comboInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<select th:class="${'form-control form-control-combo select-' + name + ' list-group-item list-group-item-action'}"
		        th:id="${'comboInput_' + name}" th:name="${name}">
			<option th:replace="${options}"></option>
		</select>
    </div>

	<div th:fragment="multiSelectionTextInput(name, label)" class="form-group">
		<label th:for="${'multiSelectionTextInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<select th:class="${'form-control form-contol-multitext select-' + name + ' list-group-item list-group-item-action'}"
		        th:id="${'multiSelectionTextInput_' + name}" th:name="${name}">
		</select>
    </div>
    
	<div th:fragment="textAreaInput(name, label, placeholder, value)" class="form-group">
		<label th:for="${'textAreaInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<textarea class="form-control" rows="10" wrap="soft" th:placeholder="${placeholder}"
		          th:value="${value}" th:id="${'textAreaInput_' + name}" th:name="${name}"></textarea>
    </div>

	<div th:fragment="monthInput(name, label, value, maxValue, enableMonth)" class="form-group">
		<label th:for="${'monthInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<input class="form-control" type="month" th:id="${'monthInput_' + name}" th:name="${name}"
		       th:value="${value}" th:placeholder="${placeholder}"
		       min="1980-01" th:max="${maxValue}" pattern="[0-9]{4}-[0-9]{2}"></input>
		<label th:for="${'monthInput_' + name + '_enableMonth'}" class="col-form-label" th:utext="#{html.EnableMonth}"></label>
		<input class="form-control" type="checkbox" th:id="${'monthInput_' + name + '_enableMonth'}"
		       th:checked="${enableMonth}"></input>
    </div>

	<div th:fragment="dateInput(name, label, value)" class="form-group">
		<label th:for="${'dateInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<input class="form-control" type="date" th:id="${'dateInput_' + name}" th:name="${name}"
		       th:value="${value}" th:placeholder="${placeholder}"
		       pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"></input>
    </div>

	<div th:fragment="checkInput(name, label, value)" class="form-group">
		<label th:for="${'checkInput_' + name}" class="col-form-label" th:utext="${label}"></label>
		<input class="form-control" type="checkbox" th:id="${'checkInput_' + name}" th:name="${name}"
		       th:checked="${value}"></input>
    </div>

</html>